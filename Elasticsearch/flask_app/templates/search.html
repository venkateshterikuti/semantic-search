<!doctype html>
<html lang="en">
<head>
    <title>Product Search</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <!-- Display execution time and step times in the top-right corner -->
    <div class="d-flex justify-content-end">
        <p class="text-muted">
            {% if step_summary %}
                {{ step_summary }}
            {% endif %}
        </p>
    </div>

    <h1 class="mb-4">Cell Phone and Cell Phone Accessories</h1>
    <form method="post" class="mb-5">
        <div class="input-group">
            <input type="text" name="query" class="form-control" placeholder="Enter your search query" required>
            <button class="btn btn-primary" type="submit">Search</button>
        </div>
    </form>

    <!-- Display extracted filters -->
    {% if filters %}
        <h2 class="mb-3">Extracted Filters:</h2>
        <ul class="list-group mb-5">
            <li class="list-group-item"><strong>Price Range:</strong> {{ filters.get('price_min', 'N/A') }} - {{ filters.get('price_max', 'N/A') }}</li>
            <li class="list-group-item"><strong>Review Count Range:</strong> {{ filters.get('review_count_min', 'N/A') }} - {{ filters.get('review_count_max', 'N/A') }}</li>
            <li class="list-group-item"><strong>Average Rating Range:</strong> {{ filters.get('average_rating_min', 'N/A') }} - {{ filters.get('average_rating_max', 'N/A') }}</li>
            <li class="list-group-item"><strong>Subcategory:</strong> {{ filters.get('subcategory', 'N/A') }}</li>
        </ul>
    {% endif %}

    {% if results %}
        <h2 class="mb-3">Results:</h2>
        {% for result in results %}
            <div class="card mb-3">
                <div class="card-body">
                    <h5 class="card-title">{{ loop.index }}. {{ result.title }}</h5>
                    <p class="card-text"><strong>Average Rating:</strong> {{ result.average_rating }}</p>
                    <p class="card-text"><strong>Rating Number:</strong> {{ result.rating_number }}</p>
                    <p class="card-text"><strong>Features:</strong> {{ result.features }}</p>
                    <p class="card-text"><strong>Description:</strong> {{ result.description }}</p>
                    <p class="card-text"><strong>Details:</strong> {{ result.details }}</p>
                    <p class="card-text"><strong>Price:</strong> {{ result.price }}</p>
                    <p class="card-text"><strong>Subcategory:</strong> {{ result.subcategory }}</p>
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
